$(parent.window.document.body).find(".mask").remove();$.xlkjs=function(options){var opts=$.extend({},$.xlkjs.method,options);var div=opts.div;$("."+div+"").css({"width":"152px","height":"30px","margin":"20px"});$("."+div+" ul li").click(function(){$("."+div+" input[type='hidden']").val($(this).data("val"));$("."+div+" input[type='text']").val($(this).text())});opts.defaultVal(div);opts.inputKeyUp(div)};$.xlkjs.method={defaultVal:function(div){var hideVal=$("."+div+" input[type='hidden']").val();if(hideVal!=""){$("."+div+" ul li").each(function(i,dq){if($(dq).data("val")==hideVal){$("."+div+" input[type='text']").val($(dq).text())}})}},inputKeyUp:function(div){$("."+div+" input").keyup(function(event){var e=event||window.event;var code=e.keyCode||e.which;lishow(div,$(this).val());if(code==40){xia(div)}if(code==38){shang(div)}if(code==13){que(div)}}).click(function(){lishow(div,$("."+div+" input[type='text']").val())}).blur(function(){setTimeout(function(){$("."+div+" ul").hide()},200)})},};function lishow(div,val){$("."+div+" ul").show();$("."+div+" ul li").hide();$("."+div+" ul li").each(function(i,vals){var lival=$(vals).text();if(lival.indexOf(val)!=-1){$(vals).show()}})}function xia(div){var lis=$("."+div+"").find("ul li:visible");var li=0;var xiaLength=0;$(lis).each(function(i,value){if(rgb2hex($(this).css("background-color"))=="#d2d2d2"){li=i+1;xiaLength=$(this).height()}$(this).css("background-color","")});if(li>5){$("."+div+" ul").scrollTop($("."+div+" ul").scrollTop()+xiaLength)}if(li<lis.length){$(lis[li]).css("background-color","#d2d2d2")}else{$(lis[lis.length-1]).css("background-color","#d2d2d2")}}function shang(div){var lis=$("."+div+"").find("ul li:visible");var li=0;var topLength=0;$(lis).each(function(i,value){if(rgb2hex($(this).css("background-color"))=="#d2d2d2"){li=i-1;topLength=$(this).height()}$(this).css("background-color","")});if(lis.length-li>5){$("."+div+" ul").scrollTop($("."+div+" ul").scrollTop()-topLength)}if(li>0){$(lis[li]).css("background-color","#d2d2d2")}else{$(lis[0]).css("background-color","#d2d2d2")}}function que(div){var lis=$("."+div+"").find("ul li:visible");var text="";var val="";$(lis).each(function(i,value){if(rgb2hex($(this).css("background-color"))=="#d2d2d2"){text=$(this).text();val=$(this).data("val")}});if(val!=""){$("."+div+" input[type='text']").val(val)}$("."+div+" input[type='hidden']").val(val);$("."+div+" input[type='text']").val(text);$("."+div+" ul").hide();qcLiBackgrond(div)}function qcLiBackgrond(div){$("."+div+" ul li").css("background","none")}function rgb2hex(rgb){if(rgb!="transparent"&&rgb!="rgba(0, 0, 0, 0)"){rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function hex(x){return("0"+parseInt(x).toString(16)).slice(-2)}return"#"+hex(rgb[1])+hex(rgb[2])+hex(rgb[3])}};