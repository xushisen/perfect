$(function(){jQuery.extend({setApDiv:function(id){$("#"+id).keyup(function(event){var inputs=$(this);var e=event||window.event;e.preventDefault();var code=e.keyCode||e.which;var inputWidth=inputs.width();var inputLeft=inputs.offset().left;var inputTop=inputs.offset().top;if(inputs.val()==""){$("#pin").remove();return}if(code!=40&&code!=38&&code!=13){$.ajax({type:"get",url:"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+inputs.val()+"&cb=?",dataType:"jsonp",success:function(date){var li="";var dates=date.s;for(var i=0,j=dates.length;i<j;i++){li+="<li>"+dates[i]+"</li>"}$("#pin").remove();inputs.parent().append("<div id='pin' class='kuang'><ul>"+li+"</ul></div>");$("#pin").width(inputWidth);$("#pin").css({position:"absolute","top":inputTop+20,"left":inputLeft,"z-index":2});$("#pin ul li").each(function(){$(this).click(function(){$("#"+id).val($(this).text());$("#pin").remove()})})},error:function(){}})}if(code==40){xia()}if(code==38){shang()}if(code==13){que(id)}})}})});function xia(){var lis=$("#pin").find("ul li");var li=0;var xiaLength=0;$(lis).each(function(i,value){if(rgb2hex($(this).css("background-color"))=="#888888"){li=i+1;xiaLength=$(this).height()}$(this).css("background-color","")});if(li>2){$("#pin").scrollTop($("#pin").scrollTop()+xiaLength)}if(li<lis.length){$(lis[li]).css("background-color","#888888")}else{$(lis[lis.length-1]).css("background-color","#888888")}}function shang(){var lis=$("#pin").find("ul li");var li=0;var topLength=0;$(lis).each(function(i,value){if(rgb2hex($(this).css("background-color"))=="#888888"){li=i-1;topLength=$(this).height()}$(this).css("background-color","")});if(li<8){$("#pin").scrollTop($("#pin").scrollTop()-topLength)}if(li>0){$(lis[li]).css("background-color","#888888")}else{$(lis[0]).css("background-color","#888888")}}function que(id){var lis=$("#pin").find("ul li");var val="";$(lis).each(function(i,value){if(rgb2hex($(this).css("background-color"))=="#888888"){val=$(this).text()}});if(val!=""){$("#"+id).val(val)}else{$("#"+id).val($("#"+id).val())}$("#pin").remove()}function rgb2hex(rgb){if(rgb!="transparent"&&rgb!="rgba(0, 0, 0, 0)"){rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function hex(x){return("0"+parseInt(x).toString(16)).slice(-2)}return"#"+hex(rgb[1])+hex(rgb[2])+hex(rgb[3])}};