var c=document.getElementById("myCanvas");var context=c.getContext("2d");var widht=$(window).width()-5;var height=$(window).height()-5;c.width=widht;c.height=height;var num=$(window).height()+300;var shu=[];var xia=[0,2];var shang=[1,3];var xianshu=[];var x=Math.random()*widht;var y=Math.random()*height;$.dl=function(options){var opts=$.extend({},options);for(var i=0;i<num;i++){shu.push({"x":Math.floor(Math.random()*widht),"y":Math.floor(Math.random()*height),"flag":Math.floor(Math.random()*4),bj:Math.floor(Math.random()*4),color:"rgba("+getColor()+",.8)"});}drawPath();};function drawPath(){context.clearRect(0,0,widht,height);var grad=context.createLinearGradient(0,0,widht,height);grad.addColorStop(0,"rgb(028, 128, 152)");grad.addColorStop(0.5,"rgb(107, 162, 139)");grad.addColorStop(1,"rgb(023, 086, 130)");context.fillStyle=grad;context.fillRect(0,0,widht,height);xianshu.splice(0,xianshu.length);for(var i=0;i<num;i++){if(shu[i].x>(x-50)&&shu[i].x<(x+50)&&shu[i].y>(y-50)&&shu[i].y<(y+50)){xianshu.push({x:shu[i].x,y:shu[i].y});}var colors=getColor();context.fillStyle=shu[i].color;context.beginPath();if(shu[i].flag==0){shu[i].x=shu[i].x+1;shu[i].y=shu[i].y+1;}else{if(shu[i].flag==1){shu[i].x=shu[i].x-1;shu[i].y=shu[i].y-1;}else{if(shu[i].flag==2){shu[i].x=shu[i].x-1;shu[i].y=shu[i].y+1;}else{if(shu[i].flag==3){shu[i].x=shu[i].x+1;shu[i].y=shu[i].y-1;}}}}if(shu[i].y<5||shu[i].x<5){var ran=Math.floor(Math.random()*2);shu[i].flag=xia[ran];}else{if(shu[i].y>height||shu[i].x>widht){var ran=Math.floor(Math.random()*2);shu[i].flag=shang[ran];}}context.arc(shu[i].x,shu[i].y,shu[i].bj,0,2*Math.PI,false);context.closePath();context.fill();}drawXt();}function getColor(){var r=Math.floor(Math.random()*254);var g=Math.floor(Math.random()*254);var b=Math.floor(Math.random()*254);return r+","+g+","+b;}setInterval(drawPath,100);function drawXt(){if(xianshu.length!=0){context.strokeStyle="#fff";context.beginPath();context.moveTo(xianshu[0].x,xianshu[0].y);for(var i=0;i<xianshu.length;i++){context.lineTo(xianshu[i].x,xianshu[i].y);}context.closePath();context.stroke();}}c.onmousemove=function(e){xianshu.splice(0,xianshu.length);var e=e||event;x=e.clientX;y=e.clientY;for(var i=0;i<num;i++){if(shu[i].x>(x-50)&&shu[i].x<(x+50)&&shu[i].y>(y-50)&&shu[i].y<(y+50)){xianshu.push({x:shu[i].x,y:shu[i].y});}}drawXt();};